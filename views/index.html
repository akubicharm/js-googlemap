<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
  <meta http-equiv="content-type" content="text/html; charset=utf-8"/> 
  <title>Google Maps V3で地図を表示する</title> 
  <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBbi26T3Zue22gdM6JWbcEZ_E7z1XNwFQA&sensor=false">
    </script>
    var  latitude = 0;
    var  longitude = 0;
    var msg = "Emtpy";

    function successCallback(position) {
      latitude = position.coords.latitude;
      longitude = position.coords.longitude;

      msg = "緯度:" + latitude + ", 経度:" + longitude;
    }

    function errorCallback(error) {
      latitude = 35.6471564;
      longitude = 139.7075454;

      msg = "Error occured";
    } 

    google.maps.event.addDomListener(window, 'load', function() { 
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
        document.getElementById('pos').innerText = msg;
      }
      var map = document.getElementById("gmap"); 
        var options = { 
          zoom: 16, 
          center: new google.maps.LatLng(latitude, longitude),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }; 
        new google.maps.Map(map, options); 
      }); 
  </script> 
  <!-- MapType, MapTypeId.ROADMAP, MapTypeId.SATELLITE, MapTypeId.HYBRID, MapTyeId.TERRAIN -->
</head> 
<body> 
  <form action="#" onsubmit="getLatLng(document.getElementById('address').value);return(false);">
    <input type="text" size="50" name="addresss" />
    <input type="submit" value="検索" />
  </form>
  <p id="pos"></p>
  <div id="gmap" style="width : 500px; height : 500px;"></div> 
</body> 
</html> 
